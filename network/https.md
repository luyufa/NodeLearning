## https

##### HTTP+TLS=HTTPS

1. TCP/IP 四层模型

![TCP/IP](https://github.com/luyufa/NodeLearning/blob/master/network/https/1.png)

`HTTP`位于应用层，主要定义数据如何包装，传输数据主要靠`TCP`协议，`HTTP`是直接把封装好的数据给到`TCP`传输，而`HTTPS`便是在把数据给到`TCP`之前通过安全套接层`TLS`进行加密，在进行传输。

![TCP/IP](https://github.com/luyufa/NodeLearning/blob/master/network/https/2.png)

##### 加密

 1. 对称加密：
   加密解密用的秘钥是一样的，加密解密效率相对较高，但存在秘钥泄密和两两维护一个秘钥的问题。
 2. 非对称加密：
   存在公钥和私钥，公钥加密仅私钥可解，私钥加密仅公钥可解，加密解密效率相对较低，传输仅单向安全。



##### 证书
> 浏览器内置权威CA机构的根证书

1. 证书格式(~的需特别注意)
```
证书版本号

证书序列号

~签名算法标识符(CA签发证书)
    1) 公开密钥算法
    2) hash算法

~签发机构

有效期

证书用户名

~证书持有者公开密钥信息
   1) 证书持有者的公开密钥的值
   2) 公开密钥使用的算法标识符。此标识符包含公开密钥算法和hash算法。

签发者唯一标识符

证书持有者唯一标识符

~签名算法--------证书签发机构对证书上述内容的签名算法

~签名值-------证书签发机构对证书上述内容的签名值
```


2. 数字签名和摘要

  `传输内容`->`hash`->`摘要`->`私钥加密`->`数字签名`

3. 识别非法证书

    ```
    1. 检查CA机构，不认识则认定为危险证书

    2. CA机构存在，于是根据CA机构找CA根证书、和CA公钥，对伪造证书的数字签名进行解密，解不了则认定为危险证书

    3. 若第二步通过此时拿到证书的摘要A，通过证书中的hash算法计算当前证书的摘要B

    4. 如A!=B则认定为危险证书
    ```

 ##### HTTPS通讯时序图

 ![TCP/IP](https://github.com/luyufa/NodeLearning/blob/master/network/https/3.png)
